{% extends "base.html" %}
{% block title %} Neuron Info {% endblock %}
{% block content %}

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  google.charts.load("current", {packages:["corechart"]});
  google.charts.setOnLoadCallback(drawCharts);

  function drawChart(title, json, elem) {
    const data = google.visualization.arrayToDataTable(json);
    const options = {
      title: title,
      pieHole: 0.4,
    };
    const chart = new google.visualization.PieChart(elem);
    chart.draw(data, options);
  }
  function drawCharts() {
    charts_container = document.getElementById('charts_container');
    {% for k, v in charts.items() %}
        elem = document.createElement('div');
        elem.setAttribute("class", "card");
        elem.setAttribute("style", "width: 100%; height: 400px;");
        charts_container.appendChild(elem);
        drawChart("{{k}}", {{v|tojson}}, elem);
    {% endfor %}
  }
</script>

<h5 style="margin: 14px; color: purple;">{{caption}}</h5>
<div style="overflow-x:auto;">
<table class="table">
  <tbody>
    {% for k, v in neuron_info.items() %}
        <tr>
          <td>{{k}}</td>
          <td>{{v|safe}}</td>
        </tr>
    {% endfor %}
  </tbody>
</table>
</div>

<div class="card-columns"  id="charts_container" style="padding: 5px;"></div>

<iframe style="width: 100%; height: 600px;" src="connections?root_ids={{id}}" title="connectivity" loading="lazy"></iframe>

{% endblock %}