from unittest import TestCase
from src.utils.pathway_vis import sort_layers


class Test(TestCase):
    def test_sort_layers(self):

        layers = {1: 0, 2: 1, 3: 1, 4: 1, 5: 2, 6: 2, 7: 2, 8: 2, 9: 3}
        connections = [
            (1, 2, 10),
            (1, 3, 5),
            (1, 4, 1),
            (2, 5, 1),
            (2, 6, 10),
            (3, 7, 1),
            (3, 8, 5),
            (4, 6, 1),
            (5, 9, 5),
            (6, 9, 1),
            (7, 9, 10),
            (8, 9, 1),
        ]

        sort_layers(layers, connections)

        self.assertEqual(
            layers,
            {
                1: (0, 0),
                2: (1, 0),
                3: (1, 2),
                4: (1, 1),
                5: (2, 0),
                6: (2, 1),
                7: (2, 2),
                8: (2, 3),
                9: (3, 0),
            },
        )

    def test_sort_layers_2(self):
        layers = {
            720575940619453831: 0,
            720575940631997032: 3,
            720575940628209152: 1,
            720575940626974737: 1,
            720575940621560088: 1,
            720575940617241629: 1,
            720575940621490721: 1,
            720575940638989219: 1,
            720575940639956643: 1,
            720575940618926757: 1,
            720575940630670890: 1,
            720575940625874992: 1,
            720575940635527092: 1,
            720575940623078071: 1,
            720575940628866242: 1,
            720575940610054980: 1,
            720575940624659789: 1,
            720575940628462927: 1,
            720575940625841241: 1,
            720575940616065254: 1,
            720575940631394920: 1,
            720575940620833901: 1,
            720575940630697078: 1,
            720575940616921152: 2,
            720575940631349335: 2,
            720575940625178768: 2,
            720575940611885461: 2,
            720575940614736290: 2,
            720575940611858906: 2,
            720575940626668218: 2,
            720575940621218694: 2,
            720575940633170969: 2,
            720575940646088068: 2,
            720575940646530612: 2,
            720575940637216624: 2,
            720575940628182910: 2,
            720575940625047484: 2,
        }
        cons = [
            [720575940619453831, 720575940628209152, 33],
            [720575940619453831, 720575940626974737, 43],
            [720575940619453831, 720575940621560088, 13],
            [720575940619453831, 720575940617241629, 5],
            [720575940619453831, 720575940621490721, 73],
            [720575940619453831, 720575940638989219, 7],
            [720575940619453831, 720575940639956643, 18],
            [720575940619453831, 720575940618926757, 8],
            [720575940619453831, 720575940630670890, 19],
            [720575940619453831, 720575940625874992, 12],
            [720575940619453831, 720575940635527092, 29],
            [720575940619453831, 720575940623078071, 17],
            [720575940619453831, 720575940628866242, 0],
            [720575940619453831, 720575940610054980, 8],
            [720575940619453831, 720575940624659789, 9],
            [720575940619453831, 720575940628462927, 0],
            [720575940619453831, 720575940625841241, 6],
            [720575940619453831, 720575940616065254, 7],
            [720575940619453831, 720575940631394920, 9],
            [720575940619453831, 720575940620833901, 5],
            [720575940619453831, 720575940630697078, 6],
            [720575940628209152, 720575940616921152, 24],
            [720575940628209152, 720575940646088068, 9],
            [720575940626974737, 720575940616921152, 28],
            [720575940626974737, 720575940646088068, 12],
            [720575940621560088, 720575940626668218, 0],
            [720575940617241629, 720575940616921152, 19],
            [720575940617241629, 720575940625178768, 9],
            [720575940617241629, 720575940621218694, 5],
            [720575940617241629, 720575940633170969, 8],
            [720575940617241629, 720575940646530612, 8],
            [720575940621490721, 720575940616921152, 5],
            [720575940638989219, 720575940616921152, 14],
            [720575940638989219, 720575940633170969, 5],
            [720575940638989219, 720575940646088068, 6],
            [720575940638989219, 720575940637216624, 10],
            [720575940639956643, 720575940646088068, 137],
            [720575940618926757, 720575940616921152, 13],
            [720575940630670890, 720575940633170969, 7],
            [720575940625874992, 720575940611885461, 6],
            [720575940635527092, 720575940614736290, 43],
            [720575940635527092, 720575940611858906, 10],
            [720575940623078071, 720575940626668218, 0],
            [720575940628866242, 720575940626668218, 6],
            [720575940610054980, 720575940611885461, 14],
            [720575940624659789, 720575940616921152, 15],
            [720575940628462927, 720575940646530612, 39],
            [720575940628462927, 720575940637216624, 204],
            [720575940628462927, 720575940628182910, 106],
            [720575940625841241, 720575940616921152, 16],
            [720575940625841241, 720575940626668218, 0],
            [720575940625841241, 720575940633170969, 62],
            [720575940616065254, 720575940616921152, 51],
            [720575940631394920, 720575940616921152, 23],
            [720575940620833901, 720575940614736290, 23],
            [720575940630697078, 720575940631349335, 10],
            [720575940630697078, 720575940625047484, 8],
            [720575940616921152, 720575940631997032, 0],
            [720575940631349335, 720575940631997032, 7],
            [720575940625178768, 720575940631997032, 16],
            [720575940611885461, 720575940631997032, 5],
            [720575940614736290, 720575940631997032, 22],
            [720575940611858906, 720575940631997032, 12],
            [720575940626668218, 720575940631997032, 87],
            [720575940621218694, 720575940631997032, 57],
            [720575940633170969, 720575940631997032, 0],
            [720575940646088068, 720575940631997032, 6],
            [720575940646530612, 720575940631997032, 8],
            [720575940637216624, 720575940631997032, 5],
            [720575940628182910, 720575940631997032, 12],
            [720575940625047484, 720575940631997032, 9],
        ]

        sort_layers(node_layers=layers, cons=cons)
        self.assertEqual(1, 1)
